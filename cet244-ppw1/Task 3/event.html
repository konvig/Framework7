<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz" rel="stylesheet">
  <title>Hack Event 2019 Countdown</title>
</head>

<body>
  <div id="container"></div>

</body>
<script type="text/babel">
//creating Countdown heading component since it will have different CSS I created component of it
class CountdownHeading extends React.Component{
    render(){
      //css headingstyle after rendering class
        var headingStyle={
            fontSize: 30,
            color: "#c8c8c8",
            marginBottom: 0,
            fontFamily: "Yanone Kaffeesatz"
        }
        //returning paragraph with headingStyle and it takes text as a parameter which is declared in CountDownTimerToEvent Class
        return(
            <p style={headingStyle}> {this.props.text} </p>
        );
    }
}

//Countdown class - inspired by github/stackoverflow and codepen example 
class Countdown extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      now: moment(),
      dateTo: moment(this.props.dateTo),
      day: 0,
      hour: 0,
    };
    this.timer = this.timer.bind(this);
  }
  //method that updates interval every one second - it calculates time and hours left
  componentDidMount() {
    this.countdown = setInterval(this.timer, 1000);
  }

//clean up method after component removeal from DOM
  componentWillUnmount() {
    clearInterval(this.countdown);
  }

  //timer method which does all the calculations
  timer() {
    //had to implement cdn so, I can use moment() it basicly creates time spamp of current date/time
    var now = moment();
    // variable that holds the day
    var day = this.state.dateTo.diff(now, "days");
    //variable that holds hours with calculation of total hours 
    var hourLeft = this.state.dateTo.diff(now, "hours") - (day * 24);
    //variable that holds current hours left to the event
    var hour = (day * 24) - (24-hourLeft);
    //setting the state of now/day/hour - if day is less than 10 adding 0 - so this setState is also formatting the output so instead of 7 hours its 07 hours
    //same goes for day
    this.setState({
      now: now,
      day: day < 10 ? "0" + day : day,
      hour: hour < 10 ? "0" + hour : hour,
    });
  }
  //renderDays method which formats the multiplicity - so if state.day is plural than state.day ends with days - if its a single day than adding day at the end.
  renderDays() {
    if (this.state.day > 1) {
      return this.state.day + " days ";
    } else if (this.state.day === 1) {
      return this.state.day + " day ";
    } else {
      return "";
    }
  }
  //render method which returns div with days left and hours left.
  render() {
    var countdownStyle={
        fontSize: 100,
        marginTop: 20,
        marginBottom: 20
      }
      var countdownHourStyle={
          fontSize: 50,
          marginTop: 20
      }
    return (
      <div>
         <h1 style={countdownStyle}>{this.renderDays()}</h1>
         <h1 style={countdownHourStyle}>(that's... {this.state.hour} hours and counting)</h1>
      </div>
    );
  }
}
//CountDownTimerToEvent class - used this component to wrap all previous classes and methods together so i can just simply call it
class CountDownTimerToEvent extends React.Component{
    render(){
      //styling
        var CountDownStyle={
            margin: 300,
            textAlign: "center",
            fontFamily: "Yanone Kaffeesatz"
        }
        //returning div with style and with other smaller component i have created - this class glues everything together so I can call it in dom with a single line
        return(
        <div style={CountDownStyle}>
          <CountdownHeading text="Hack Event 2019"/>
          <Countdown dateTo={{ year: 2019, month: 6, date: 4 }} />
        </div>
        );
    }
}


//Dom method where i am just simply calling CountDownTimerToEvent component as stated in assignment
ReactDOM.render(
    <CountDownTimerToEvent />,
    //QuerySelector - equivalent of docuemnt get element by id - Container
    document.querySelector("#container")
    );
    </script>
</html>